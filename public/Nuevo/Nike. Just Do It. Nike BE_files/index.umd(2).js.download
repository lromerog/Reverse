!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("ReactDOM"),require("webShellClient")):"function"==typeof define&&define.amd?define(["React","ReactDOM","webShellClient"],t):"object"==typeof exports?exports["async-chat"]=t(require("React"),require("ReactDOM"),require("webShellClient")):e["async-chat"]=t(e.React,e.ReactDOM,e.webShellClient)}(self,((e,t,r)=>(()=>{"use strict";var n={326:(e,t)=>{var r,n,s,i,c,a,o,u,m,l;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_USER_LOCATION_DATA=t.DEFAULT_LOCALE_DATA=t.DEFAULT_WEB_SHELL_CLIENT_INFO=t.ANALYTICS_SCRIPT=t.NONPROD_UNITE_SCRIPT=t.PROD_UNITE_SCRIPT=t.DATA_CAPTURE_SCRIPT=t.MODAL_ROOT_ID=t.REMOTE_COMPONENTS_URL=t.VENDOR_SCRIPT_REACT_DOM_URL=t.VENDOR_SCRIPT_REACT_URL=t.HOST_NAME=t.REMOTE_COMPONENTS_NAME=t.KEEPALIVE=t.PRE_FETCH_DEPENDENCIES=void 0,t.PRE_FETCH_DEPENDENCIES={REACT:"React",REACT_DOM:"ReactDOM",REMOTE:"Remote"},t.KEEPALIVE={HTTP_KEEPALIVE_TIMEOUT:61e3,HTTP_HEADERS_TIMEOUT:65e3},t.REMOTE_COMPONENTS_NAME={CMS_THREAD:"CMS_THREAD",RECOMMENDATIONS:"RECOMMENDATIONS"},t.HOST_NAME=null!==(n=null!==(r={RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.WS_HOST_NAME)&&void 0!==r?r:{RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.NEXT_PUBLIC_HOST_NAME)&&void 0!==n?n:{RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.HOST_NAME,t.VENDOR_SCRIPT_REACT_URL=`https://${t.HOST_NAME}/assets/vendor/react/17.0.2/react.production.min.js`,t.VENDOR_SCRIPT_REACT_DOM_URL=`https://${t.HOST_NAME}/assets/vendor/react-dom/17.0.2/react-dom.production.min.js`,t.REMOTE_COMPONENTS_URL={[t.REMOTE_COMPONENTS_NAME.CMS_THREAD]:`https://${t.HOST_NAME}/shell/cms_thread/v1`,[t.REMOTE_COMPONENTS_NAME.RECOMMENDATIONS]:`https://${t.HOST_NAME}/fragments/recommendations-carousel`},t.MODAL_ROOT_ID="modal-root",t.DATA_CAPTURE_SCRIPT=null!==(i=null!==(s={RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.WS_DATA_CAPTURE_SCRIPT)&&void 0!==s?s:{RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.NEXT_PUBLIC_DATA_CAPTURE_SCRIPT)&&void 0!==i?i:{RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.DATA_CAPTURE_SCRIPT,t.PROD_UNITE_SCRIPT=null!==(a=null!==(c={RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.WS_PROD_UNITE_SCRIPT)&&void 0!==c?c:{RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.NEXT_PUBLIC_PROD_UNITE_SCRIPT)&&void 0!==a?a:{RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.PROD_UNITE_SCRIPT,t.NONPROD_UNITE_SCRIPT=null!==(u=null!==(o={RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.WS_NONPROD_UNITE_SCRIPT)&&void 0!==o?o:{RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.NEXT_PUBLIC_NONPROD_UNITE_SCRIPT)&&void 0!==u?u:{RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.NONPROD_UNITE_SCRIPT,t.ANALYTICS_SCRIPT=null!==(l=null!==(m={RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.WS_ANALYTICS_SCRIPT)&&void 0!==m?m:{RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.NEXT_PUBLIC_ANALYTICS_SCRIPT)&&void 0!==l?l:{RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.ANALYTICS_SCRIPT,t.DEFAULT_WEB_SHELL_CLIENT_INFO={identityProvider:null},t.DEFAULT_LOCALE_DATA={cloudUrlFragment:"",country:"us",countryName:"United States",countryNames:{en:"United States"},currency:"USD",currencySymbol:"$",default:!0,hreflang:"en-US",intl:"en-US",langRegion:"en-US",language:"en",merchGroup:"US",urlParam:"en",translationsLanguage:"en-US"},t.DEFAULT_USER_LOCATION_DATA={country:"",state:"",latitude:"",longitude:""}},83:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),s(r(326),t)},883:t=>{t.exports=e},845:e=>{e.exports=t},315:e=>{e.exports=r}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return n[e].call(r.exports,r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};i.r(c),i.d(c,{default:()=>B});var a=i(883),o=i.n(a),u=(i(845),i(315));const m=(0,a.createContext)({}),l=({translations:e={},children:t})=>o().createElement(m.Provider,{value:e},t),b={namespacesAvailable:[],isFetching:!1,translations:{}};var d,_="production",E=["au","bg","ca","ch","hr","id","il","in","my","no","ph","ro","sg","sk","th","tw","vn","za"],h={de:"de",el:"el","en-GB":"en_GB",en:"en","es-ES":"es","es-419":"es-419",fr:"fr",hu:"en_GB",it:"it",ja:"ja",ko:"ko",nl:"nl_NL",no:"en_GB",pl:"pl","pt-PT":"pt",th:"th","zh-Hans":"zh_CN","zh-Hant":"zh_TW"},S={de:["at","be","de","lu","ch"],el:["gr"],en_GB:["id","in","my","ph","sg","tw","th","vn","au","ca","bg","hr","il","no","ro","sk","za","ch","lu","at","be","cz","dk","fi","hu","ie","nl","se","pt","si","gb"],en:["us"],es:["us","es"],"es-419":["us"],fr:["ca","ch","fr","lu","be"],it:["it","ch"],ja:["jp"],ko:["kr"],nl_NL:["be","nl"],pl:["pl"],pt:["pt"],th:["th"],zh_CN:[],zh_TW:["hk","tw"]},W={preview:{de:{member:{serviceName:"Web_German_Member",srcId:"ESWWebGermanMember1697833255047"},guest:{serviceName:"Web_German_Guest",srcId:"ESWWebGermanGuest1697833013073"}},el:{member:{serviceName:"Web_Greek_Member",srcId:"ESWWebGreekMember1697833742050"},guest:{serviceName:"Web_Greek_Guest",srcId:"ESWWebGreekGuest1697833490748"}},en_GB:{member:{serviceName:"Web_English_Member",srcId:"ESWWebEnglishMember1697476572415"},guest:{serviceName:"Web_English_Guest",srcId:"ESWWebEnglishGuest1697832154291"}},en:{member:{serviceName:"Web_English_US_Member",srcId:"ESWWebEnglishUSMember1712812387694"},guest:{serviceName:"Web_English_US_Guest",srcId:"ESWWebEnglishUSGuest1712815613916"}},es:{member:{serviceName:"Web_Spanish_Member",srcId:"ESWWebSpanishMember1697835882711"},guest:{serviceName:"Web_Spanish_Guest",srcId:"ESWWebSpanishGuest1697835650575"}},"es-419":{member:{serviceName:"Web_Spanish_US_Member",srcId:"ESWWebSpanishUSMember1707182773978"},guest:{serviceName:"Web_Spanish_US_Guest",srcId:"ESWWebSpanishUSGuest1707182439780"}},fr:{member:{serviceName:"Web_French_Member",srcId:"ESWWebFrenchMember1697832776524"},guest:{serviceName:"Web_French_Guest",srcId:"ESWWebFrenchGuest1697832500456"}},it:{member:{serviceName:"Web_Italian_Member",srcId:"ESWWebItalianMember1697834194083"},guest:{serviceName:"Web_Italian_Guest",srcId:"ESWWebItalianGuest1697833955900"}},ja:{member:{serviceName:"Web_Japanese_Member",srcId:"ESWWebJapaneseMember1697834604196"},guest:{serviceName:"Web_Japanese_Guest",srcId:"ESWWebJapaneseGuest1697834398925"}},ko:{member:{serviceName:"Web_Korean_Member",srcId:"ESWWebKoreanMember1697835048381"},guest:{serviceName:"Web_Korean_Guest",srcId:"ESWWebKoreanGuest1697834813685"}},nl_NL:{member:{serviceName:"Web_Dutch_Member",srcId:"ESWWebDutchMember1698074096713"},guest:{serviceName:"Web_Dutch_Guest",srcId:"ESWWebDutchGuest1698073887257"}},pl:{member:{serviceName:"Web_Polish_Member",srcId:"ESWWebPolishMember1697835442615"},guest:{serviceName:"Web_Polish_Guest",srcId:"ESWWebPolishGuest1697835241792"}},pt:{member:{serviceName:"Web_Portuguese_Member",srcId:"ESWWebPortugueseMember1710173487654"},guest:{serviceName:"Web_Portuguese_Guest",srcId:"ESWWebPortugueseGuest1710174026404"}},th:{member:{serviceName:"Web_Thai_Member",srcId:"ESWWebThaiMember1697836274679"},guest:{serviceName:"Web_Thai_Guest",srcId:"ESWWebThaiGuest1697836089282"}},zh_CN:{member:{serviceName:"Web_Chinese_Simplified_Member",srcId:"ESWWebChineseSimplified1698072970768"},guest:{serviceName:"Web_Chinese_Simplified_Guest",srcId:"ESWWebChineseSimplified1697836522589"}},zh_TW:{member:{serviceName:"Web_Chinese_Traditional_Member",srcId:"ESWWebChineseTraditiona1698073626656"},guest:{serviceName:"Web_Chinese_Traditional_Guest",srcId:"ESWWebChineseTraditiona1698073321832"}}},staging:{de:{member:{serviceName:"Web_German_Member",srcId:"ESWWebGermanMember1710295353074"},guest:{serviceName:"Web_German_Guest",srcId:"ESWWebGermanGuest1710295202686"}},el:{member:{serviceName:"Web_Greek_Member",srcId:"ESWWebGreekMember1710295650721"},guest:{serviceName:"Web_Greek_Guest",srcId:"ESWWebGreekGuest1710295494944"}},en_GB:{member:{serviceName:"Web_English_Member",srcId:"ESWWebEnglishMember1710294356541"},guest:{serviceName:"Web_English_Guest",srcId:"ESWWebEnglishGuest1710294201836"}},en:{member:{serviceName:"Web_English_US_Member",srcId:"ESWWebEnglishUSMember1712816294126"},guest:{serviceName:"Web_English_US_Guest",srcId:"ESWWebEnglishUSGuest1712820454513"}},es:{member:{serviceName:"Web_Spanish_Member",srcId:"ESWWebSpanishMember1710297585645"},guest:{serviceName:"Web_Spanish_Guest",srcId:"ESWWebSpanishGuest1710297457780"}},"es-419":{member:{serviceName:"Web_Spanish_US_Member",srcId:"ESWWebSpanishUSMember1710297844860"},guest:{serviceName:"Web_Spanish_US_Guest",srcId:"ESWWebSpanishUSGuest1710297702522"}},fr:{member:{serviceName:"Web_French_Member",srcId:"ESWWebFrenchMember1710295081330"},guest:{serviceName:"Web_French_Guest",srcId:"ESWWebFrenchGuest1710294643168"}},it:{member:{serviceName:"Web_Italian_Member",srcId:"ESWWebItalianMember1710295971846"},guest:{serviceName:"Web_Italian_Guest",srcId:"ESWWebItalianGuest1710295819519"}},ja:{member:{serviceName:"Web_Japanese_Member",srcId:"ESWWebJapaneseMember1710296253922"},guest:{serviceName:"Web_Japanese_Guest",srcId:"ESWWebJapaneseGuest1710296127613"}},ko:{member:{serviceName:"Web_Korean_Member",srcId:"ESWWebKoreanMember1710296580282"},guest:{serviceName:"Web_Korean_Guest",srcId:"ESWWebKoreanGuest1710296428508"}},nl_NL:{member:{serviceName:"Web_Dutch_Member",srcId:"ESWWebDutchMember1710293566893"},guest:{serviceName:"Web_Dutch_Guest",srcId:"ESWWebDutchGuest1710293412267"}},pl:{member:{serviceName:"Web_Polish_Member",srcId:"ESWWebPolishMember1710297010959"},guest:{serviceName:"Web_Polish_Guest",srcId:"ESWWebPolishGuest1710296744617"}},pt:{member:{serviceName:"Web_Portuguese_Member",srcId:"ESWWebPortugueseMember1710297315953"},guest:{serviceName:"Web_Portuguese_Guest",srcId:"ESWWebPortugueseGuest1710297141021"}},th:{member:{serviceName:"Web_Thai_Member",srcId:"ESWWebThaiMember1710298071625"},guest:{serviceName:"Web_Thai_Guest",srcId:"ESWWebThaiGuest1710297961325"}},zh_CN:{member:{serviceName:"Web_Chinese_Simplified_Member",srcId:"ESWWebChineseSimplified1710292793790"},guest:{serviceName:"Web_Chinese_Simplified_Guest",srcId:"ESWWebChineseSimplified1710292331112"}},zh_TW:{member:{serviceName:"Web_Chinese_Traditional_Member",srcId:"ESWWebChineseTraditiona1710293225100"},guest:{serviceName:"Web_Chinese_Traditional_Guest",srcId:"ESWWebChineseTraditiona1710293056358"}}},production:{de:{member:{serviceName:"Web_German_Member",srcId:"ESWWebGermanMember1710549591644"},guest:{serviceName:"Web_German_Guest",srcId:"ESWWebGermanGuest1710549394784"}},el:{member:{serviceName:"Web_Greek_Member",srcId:"ESWWebGreekMember1710550025671"},guest:{serviceName:"Web_Greek_Guest",srcId:"ESWWebGreekGuest1710549879440"}},en_GB:{member:{serviceName:"Web_English_Member",srcId:"ESWWebEnglishMember1710548899180"},guest:{serviceName:"Web_English_Guest",srcId:"ESWWebEnglishGuest1710548726868"}},en:{member:{serviceName:"Web_English_US_Member",srcId:"ESWWebEnglishUSMember1712823069244"},guest:{serviceName:"Web_English_US_Guest",srcId:"ESWWebEnglishUSGuest1712823616920"}},es:{member:{serviceName:"Web_Spanish_Member",srcId:"ESWWebSpanishMember1710551689504"},guest:{serviceName:"Web_Spanish_Guest",srcId:"ESWWebSpanishGuest1710551531643"}},"es-419":{member:{serviceName:"Web_Spanish_US_Member",srcId:"ESWWebSpanishUSMember1710551963755"},guest:{serviceName:"Web_Spanish_US_Guest",srcId:"ESWWebSpanishUSGuest1710551822531"}},fr:{member:{serviceName:"Web_French_Member",srcId:"ESWWebFrenchMember1710549184461"},guest:{serviceName:"Web_French_Guest",srcId:"ESWWebFrenchGuest1710549039818"}},it:{member:{serviceName:"Web_Italian_Member",srcId:"ESWWebItalianMember1710550280552"},guest:{serviceName:"Web_Italian_Guest",srcId:"ESWWebItalianGuest1710550150136"}},ja:{member:{serviceName:"Web_Japanese_Member",srcId:"ESWWebJapaneseMember1710550587673"},guest:{serviceName:"Web_Japanese_Guest",srcId:"ESWWebJapaneseGuest1710550442913"}},ko:{member:{serviceName:"Web_Korean_Member",srcId:"ESWWebKoreanMember1710550847671"},guest:{serviceName:"Web_Korean_Guest",srcId:"ESWWebKoreanGuest1710550722775"}},nl_NL:{member:{serviceName:"Web_Dutch_Member",srcId:"ESWWebDutchMember1710548256991"},guest:{serviceName:"Web_Dutch_Guest",srcId:"ESWWebDutchGuest1710548109216"}},pl:{member:{serviceName:"Web_Polish_Member",srcId:"ESWWebPolishMember1710551112426"},guest:{serviceName:"Web_Polish_Guest",srcId:"ESWWebPolishGuest1710550978009"}},pt:{member:{serviceName:"Web_Portuguese_Member",srcId:"ESWWebPortugueseMember1710551395855"},guest:{serviceName:"Web_Portuguese_Guest",srcId:"ESWWebPortugueseGuest1710551260470"}},th:{member:{serviceName:"Web_Thai_Member",srcId:"ESWWebThaiMember1710552219691"},guest:{serviceName:"Web_Thai_Guest",srcId:"ESWWebThaiGuest1710552087944"}},zh_CN:{member:{serviceName:"Web_Chinese_Simplified_Member",srcId:"ESWWebChineseSimplified1710547666709"},guest:{serviceName:"Web_Chinese_Simplified_Guest",srcId:"ESWWebChineseSimplified1710547419899"}},zh_TW:{member:{serviceName:"Web_Chinese_Traditional_Member",srcId:"ESWWebChineseTraditiona1710547965791"},guest:{serviceName:"Web_Chinese_Traditional_Guest",srcId:"ESWWebChineseTraditiona1710547823558"}}}}[_],v={preview:{id:"00D2f0000000x8o",baseURL:"https://nikeconsumerservices--csasyncpoc.sandbox.my.site.com",scrt2URL:"https://nikeconsumerservices--csasyncpoc.sandbox.my.salesforce-scrt.com"},staging:{id:"00Dg0000006IFgx",baseURL:"https://nikeconsumerservices--csstaging.sandbox.my.site.com",scrt2URL:"https://nikeconsumerservices--csstaging.sandbox.my.salesforce-scrt.com"},production:{id:"00D6A0000000MVw",baseURL:"https://nikeconsumerservices.my.site.com",scrt2URL:"https://nikeconsumerservices.my.salesforce-scrt.com"}}[_],p={preview:{enabledCountries:["at","au","be","bg","ca","ch","cz","de","dk","es","fi","fr","gb","gr","hk","hr","hu","id","ie","il","in","it","jp","kr","lu","my","nl","no","ph","pl","pt","ro","se","sg","si","sk","th","tw","us","vn","za"],swooshEnabled:!1},staging:{enabledCountries:["at","au","be","bg","ca","ch","cz","de","dk","es","fi","fr","gb","gr","hk","hr","hu","id","ie","il","in","it","jp","kr","lu","my","nl","no","ph","pl","pt","ro","se","sg","si","sk","th","tw","us","vn","za"],swooshEnabled:!1},production:{enabledCountries:["at","au","be","bg","ca","ch","cz","de","dk","es","fi","fr","gb","gr","hr","hu","ie","id","il","in","it","jp","kr","lu","my","nl","no","ph","pl","pt","ro","se","sg","si","sk","th","tw","us","vn","za"],swooshEnabled:!1}},g=u.locale.get().urlParam;u.identity.getUserProfile().then((function(e){var t;return d=null!==(t=null==e?void 0:e.userType)&&void 0!==t?t:""})).catch((function(e){console.error("[Async Chat] Error getting user profile: ",e)}));var N=function(e,t,r){try{var n;window.newrelic&&(null===(n=window.newrelic)||void 0===n||n.addPageAction("async_chat_mfe_"+e,t,g,d,_,r))}catch(e){console.error("[Async Chat] Unknown error occurred sending event to New Relic: ",e)}};function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t,r,n,s,i,c){try{var a=e[i](c),o=a.value}catch(e){return void r(e)}a.done?t(o):Promise.resolve(o).then(n,s)}function O(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function c(e){w(i,n,s,c,a,"next",e)}function a(e){w(i,n,s,c,a,"throw",e)}c(void 0)}))}}var y=function(){var e=O((function*(e){try{var t=yield fetch("https://api.nike.com/cssfproxy/api/v1/token_exchange",{method:"GET",credentials:"include",headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("Network response was not ok");return{identityToken:(yield t.json()).identityToken}}catch(e){var r;throw null===(r=window.newrelic)||void 0===r||r.addPageAction("async_chat_mfe_tokenexchange_error"),new Error("Token exchange failure: ".concat(e instanceof Error?e.message:e))}}));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=O((function*(e){var t=yield u.identity.getAccessToken();try{if(t&&e.userVerificationAPI){var r=(yield y(t)).identityToken;e.userVerificationAPI.setIdentityToken({identityTokenType:"JWT",identityToken:r})}N("token_success",{identity:u.identity})}catch(e){N("tokenexchange_error",{identity:u.identity,error:e})}}));return function(t){return e.apply(this,arguments)}}();function C(e,t,r,n,s,i,c){try{var a=e[i](c),o=a.value}catch(e){return void r(e)}a.done?t(o):Promise.resolve(o).then(n,s)}function R(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function c(e){C(i,n,s,c,a,"next",e)}function a(e){C(i,n,s,c,a,"throw",e)}c(void 0)}))}}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i=[],c=!0,a=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);c=!0);}catch(e){a=!0,s=e}finally{try{c||null==r.return||r.return()}finally{if(a)throw s}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G={"es-419":"es_MX",pt:"pt_PT"};const U=function(){var e=P((0,a.useState)(),2),t=e[0],r=e[1],n=P((0,a.useState)(!1),2),s=n[0],i=n[1],c=((e=[])=>{const t=(0,a.useContext)(m),[r,n]=(0,a.useState)(b);return(0,a.useEffect)((()=>{r.isFetching||(async()=>{n(Object.assign(Object.assign({},r),{isFetching:!0}));let s={};const i=[],c=e.reduce(((e,r)=>t[r]?Object.assign(e,{[r]:t[r]}):e),{}),a=e.filter((e=>!t[e]));if(a.length&&"undefined"!=typeof window){const e=window.webShellClient.translations;s=await e.fetch(a)}const o=Object.assign(Object.assign({},c),s);var u;Object.keys(o).forEach((e=>{t[e]=o[e],i.push(e)})),n({isFetching:!1,namespacesAvailable:[...i],translations:(u=o,Object.keys(u).reduce(((e,r)=>Object.assign(e,t[r])),{}))})})().catch((e=>{var t,r,s,i;n(b),(null===(t=window.newrelic)||void 0===t?void 0:t.noticeError)&&(null===(r=window.newrelic)||void 0===r||r.addPageAction("WEB_SHELL_CLIENT_FETCH_TRANSLATIONS_ERROR",{webShellClientVersion:null!==(s={RECO_ASSET_PREFIX:"//www.nike.com/static/cssf/async-chat",ENVIRONMENT:"production"}.WEB_SHELL_CLIENT_VERSION)&&void 0!==s?s:"",host:window.location.host,errorName:e.name,errorMessage:e.message,stackTrace:null!==(i=e.stack)&&void 0!==i?i:""})),console.error(`Failed to fetch translations: ${e.message}`)}))}),e),{formatMessage:(e,t)=>{var n,s;const i=null!==(s=null===(n=r.translations[e])||void 0===n?void 0:n.value)&&void 0!==s?s:"";return i&&"undefined"!=typeof window?window.webShellClient.translations.formatMessage.call(null,i,t):i},getMessage:e=>{var t,n;return null!==(n=null===(t=r.translations[e])||void 0===t?void 0:t.value)&&void 0!==n?n:""},messages:r.translations,isReady:e=>e.every((e=>r.namespacesAvailable.includes(e)))}})(["async-chat"]),l=u.locale.get(),d=l.country,g=l.language,f=l.cloudUrlFragment,T=l.urlParam,w="SWOOSH"===(null==t?void 0:t.userType)&&!p[_].swooshEnabled,O=p[_].enabledCountries.includes(d)&&!w,y=c.getMessage("chatCantConnectRightNow")||"We’re sorry, we can’t connect right now.\nFor immediate assistance, hit OK to visit our Contact Us page.";return(0,a.useEffect)((function(){var e=function(){var e=R((function*(){r(yield u.identity.getUserProfile()),i(!0)}));return function(){return e.apply(this,arguments)}}();N("mount"),e()}),[]),(0,a.useEffect)((function(){var e=function(){var e,t;null===(e=window.embeddedservice_bootstrap)||void 0===e||null===(t=e.userVerificationAPI)||void 0===t||t.clearSession()};return N("signOut"),addEventListener("nikeSignOut",e),function(){return removeEventListener("nikeSignOut",e)}}),[]),(0,a.useEffect)((function(){var e="https://www.nike.com/".concat(f||"us","/help/#contact"),t=!1,r=O?function(){function r(e){return n.apply(this,arguments)}function n(){return n=R((function*(n){if(!w){n>0&&(console.log("Attempt ".concat(n," to retry chat launch...")),yield new Promise((function(e){setTimeout(e,1500)})));try{yield window.embeddedservice_bootstrap.utilAPI.launchChat(!0),window.dispatchEvent(new Event("launchAsyncChatSuccess")),N("launchAsyncChatSuccess")}catch(t){console.error("chat failed to launch:",t),n>3?(window.dispatchEvent(new Event("launchAsyncChatFailure")),N("launchAsyncChatFailure",{retryCount:n,error:t}),window.confirm(y)&&window.open(e,"_blank")):yield r(n+1)}t=!1}})),n.apply(this,arguments)}t||(t=!0,r(0))}:function(){var t=d.toUpperCase(),r=E.includes(d)?"Commerce - Global Store":"Commerce - Nike.com",n=window.location.href,s=n.includes("/orders/")?"https://www.nike.com/orders/":n.includes("/help")||n.includes("/checkout")?e:n,i=window.open("https://www.nike.com/LiveChat?bu=".concat(r,"&country=").concat(t,"&language=").concat(T,"&referenceUrl=").concat(s),"expertChatPopup","toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=auto,resizable=yes,dependent=yes,width=810,height=590");null==i||i.focus()};return window.addEventListener("launchAsyncChat",r),N("launchLegacyChatListener"),function(){window.removeEventListener("launchAsyncChat",r)}}),[O,f,d,y,T,w]),(0,a.useEffect)((function(){var e,r,n;return s&&O&&function(){var s=t&&"GUEST"!==t.userType?"member":"guest",i=function(e,t,r){var n=t.toUpperCase(),s=h[r];S[s].find((function(e){return e===n.toLowerCase()}))||console.error("Invalid country/language mapping: ",n,s);var i={Country:n,Language:s,Device:"web"};if(e&&"GUEST"!==e.userType){var c=e.firstName,a=e.lastName,o=e.email;return I(I({},i),{},{First_Name_Custom:c,Last_Name_Custom:a,Email_Custom:o})}return N("getPrechatFields",{defaultFields:i}),i}(t,d,g),c=i.Language;(n=document.createElement("script")).src="".concat(v.baseURL,"/").concat(W[c][s].srcId,"/assets/js/bootstrap.min.js"),n.async=!0,n.onload=function(){!function(t,n){var s=t.Language,i=window.embeddedservice_bootstrap;if(i){var c;i.settings.devMode=!1,i.settings.language=null!==(c=G[s])&&void 0!==c?c:s,i.settings.hideChatButtonOnLoad=!0,i.settings.restrictSessionOnMessagingChannel=!0,i.settings.shouldMinimizeWindowOnNewTab=!0,window.location.href.includes("/t/")&&window.innerWidth<=959&&(i.settings.chatButtonPosition="91px, 12px"),e=function(){console.log("Received the onEmbeddedMessagingReady event…"),i.prechatAPI.setHiddenPrechatFields(t),"member"===n&&M(i)},window.addEventListener("onEmbeddedMessagingReady",e),"member"===n&&(r=function(){console.log("Received the onEmbeddedMessagingIdentityTokenExpired event…"),M(i)},window.addEventListener("onEmbeddedMessagingIdentityTokenExpired",r));var a=W[s][n],o=a.serviceName,u=a.srcId;i.init(v.id,o,"".concat(v.baseURL,"/").concat(u),{scrt2URL:"".concat(v.scrt2URL)})}}(i,s)},document.body.appendChild(n)}(),function(){n&&document.body.removeChild(n),window.removeEventListener("onEmbeddedMessagingReady",e),window.removeEventListener("onEmbeddedMessagingIdentityTokenExpired",r)}}),[O,d,s,g,t]),o().createElement(o().Fragment,null)};var L=(0,a.createContext)({}),k=function(e){var t=e.children,r=e.lang,n=(e.themeExtension,function(e,t){var r,n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]]);return n}(e,["children","lang","themeExtension"])),s=(0,a.useMemo)((function(){return Object.assign({language:r},n)}),[r,n]);return o().createElement(L.Provider,{value:s},t)},D=function(e){var t=e.children,r=e.lang,n=void 0===r?"en-us":r,s=e.themeExtension,i=function(e,t){var r,n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]]);return n}(e,["children","lang","themeExtension"]);return(0,a.useEffect)((function(){window.document&&function(e){var t,r;e&&((r=null!==(t=document.getElementById("custom-podium-css-extension"))&&void 0!==t?t:document.createElement("style")).setAttribute("id","custom-podium-css-extension"),r.innerHTML="\n    :root {\n      ".concat(Object.keys(e).map((function(t){var r=t.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())})).replace(/[0-9]\d+/g,(function(e){return"-".concat(e)}));return"--".concat(r,": ").concat(e[t],";\n")})).join(""),"\n    }\n  "),document.head.appendChild(r))}(s)}),[s]),o().createElement(k,Object.assign({lang:n,themeExtension:s},i),t)},j=i(83);const F=(0,a.createContext)(j.DEFAULT_LOCALE_DATA),x=({locale:e,children:t})=>{if("undefined"!=typeof window){const{locale:r}=window.webShellClient,n=null!=e?e:r.get();return o().createElement(F.Provider,{value:n},t)}return o().createElement(F.Provider,{value:null!=e?e:j.DEFAULT_LOCALE_DATA},t)},V=(0,a.createContext)(Object.assign({},j.DEFAULT_USER_LOCATION_DATA)),H=({children:e})=>{if("undefined"==typeof window)return o().createElement(V.Provider,{value:j.DEFAULT_USER_LOCATION_DATA},e);const{userLocation:t}=window.webShellClient,r=t.get();return o().createElement(V.Provider,{value:r},e)},z=({children:e,locale:t,translations:r={}})=>o().createElement(H,null,o().createElement(l,{translations:r},o().createElement(x,{locale:t},o().createElement(F.Consumer,null,(t=>o().createElement(D,{lang:t.langRegion.toLowerCase()},e))))));function B(e){return o().createElement(z,e,o().createElement(U,e))}return c})()));
//# sourceMappingURL=index.umd.js.map